<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Planner Nazareth - The Holy Item</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Playfair+Display:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #e3e0db; color: #444; }
        h1, h2, h3 { font-family: 'Playfair Display', serif; }
        .sidebar-item { transition: all 0.2s; cursor: pointer; opacity: 0.6; display: flex; flex-direction: column; align-items: center; padding: 12px 0; width: 100%; text-align: center; }
        .sidebar-item:hover { opacity: 1; background: rgba(255,255,255,0.05); }
        .active-tab { opacity: 1; background: rgba(255,255,255,0.1); border-radius: 12px; }
        textarea, input[type="text"] { background: transparent; border: none; outline: none; width: 100%; resize: none; transition: 0.3s; }
        textarea:focus, input[type="text"]:focus { background: rgba(0,0,0,0.02); border-radius: 8px; padding: 4px; }
        .calendar-grid { display: grid; grid-template-columns: repeat(7, 1fr); }
        .day-card { aspect-ratio: 1; display: flex; align-items: center; justify-content: center; border: 0.5px solid #f0f0f0; cursor: pointer; transition: 0.2s; position: relative; }
        .day-card:hover { background-color: #f9f9f9; }
        .today { background: #333; color: white; border-radius: 50%; width: 32px; height: 32px; display: flex; align-items: center; justify-content: center; }
        .has-content::after { content: ''; position: absolute; bottom: 6px; width: 6px; height: 6px; background: #8a817c; border-radius: 50%; }
        .wellness-icon { cursor: pointer; transition: transform 0.1s; display: flex; flex-direction: column; align-items: center; }
        .wellness-icon.inactive { opacity: 0.3; grayscale: 100%; }
        .custom-checkbox { accent-color: #333; transform: scale(1.2); cursor: pointer; }
        
        @media (max-width: 768px) {
            .main-container { flex-direction: column-reverse; height: 100vh; }
            .sidebar { width: 100%; height: auto; flex-direction: row; padding: 10px; border-top: 1px solid #333; overflow-x: auto; }
            .sidebar-item { width: auto; padding: 10px 12px; min-width: 65px; }
        }
    </style>
</head>
<body class="min-h-screen flex flex-col items-center justify-center p-2 md:p-4">

    <div class="w-full max-w-6xl bg-[#fcfcfc] rounded-[2.5rem] shadow-2xl flex flex-col md:flex-row min-h-[85vh] overflow-hidden border border-stone-200 main-container">
        
        <nav class="w-full md:w-24 bg-[#1a1a1a] flex flex-row md:flex-col items-center py-4 md:py-6 justify-between text-white sidebar">
            <div class="flex flex-row md:flex-col items-center gap-1 md:gap-4 w-full px-2">
                <div class="hidden md:flex w-12 h-12 bg-[#333] rounded-full items-center justify-center font-bold text-xs border border-stone-600 mb-2 tracking-tighter">THI</div>
                <div onclick="showTab('mes')" id="nav-mes" class="sidebar-item active-tab"><span class="text-xl">üìÖ</span><span class="text-[8px] font-bold mt-1">MES</span></div>
                <div onclick="showTab('dia')" id="nav-dia" class="sidebar-item"><span class="text-xl">üìù</span><span class="text-[8px] font-bold mt-1">D√çA</span></div>
                <div onclick="showTab('luces')" id="nav-luces" class="sidebar-item"><span class="text-xl">‚ú®</span><span class="text-[8px] font-bold mt-1">LUCES</span></div>
                <div onclick="showTab('oracion')" id="nav-oracion" class="sidebar-item"><span class="text-xl">üôè</span><span class="text-[8px] font-bold mt-1">DIARIO</span></div>
                <div onclick="showTab('bienestar')" id="nav-bienestar" class="sidebar-item"><span class="text-xl">üåø</span><span class="text-[8px] font-bold mt-1">BIEN</span></div>
                <div onclick="showTab('nazareth')" id="nav-nazareth" class="sidebar-item"><span class="text-xl">üè†</span><span class="text-[8px] font-bold mt-1">CASA</span></div>
                <div onclick="showTab('pendientes')" id="nav-pendientes" class="sidebar-item"><span class="text-xl">üìã</span><span class="text-[8px] font-bold mt-1">TODO</span></div>
            </div>
            <a href="https://calendar.google.com" target="_blank" class="hidden md:block opacity-30 hover:opacity-100 transition-opacity mb-4"><span class="text-xl">üîó</span></a>
        </nav>

        <main class="flex-1 p-4 md:p-8 overflow-y-auto bg-[#faf9f6]" id="main-scroll">
            <div id="view-container"></div>
        </main>
    </div>

    <script>
        let viewDate = new Date();
        let selectedDate = new Date();
        const months = ["Enero", "Febrero", "Marzo", "Abril", "Mayo", "Junio", "Julio", "Agosto", "Septiembre", "Octubre", "Noviembre", "Diciembre"];
        
        // --- 104 FRASES SEMANALES ---
        const weeklyQuotes = [
            "\"Dios se da a nosotros en la medida en que nosotros esperamos en √âl.\" ‚Äì Jacques Philippe",
            "\"La medida del amor es amar sin medida.\" ‚Äì San Agust√≠n",
            "\"La oraci√≥n es el ox√≠geno del alma.\" ‚Äì Padre P√≠o",
            "\"Dios nunca dijo que el camino ser√≠a f√°cil, pero s√≠ dijo que la llegada valdr√≠a la pena.\" ‚Äì Max Lucado",
            "\"La gloria de Dios es el hombre plenamente vivo.\" ‚Äì San Ireneo",
            "\"D√©jate llevar por las manos de Dios y nunca perder√°s el rumbo de tu vida.\" ‚Äì An√≥nimo",
            "\"La santidad no est√° hecha de algunos actos heroicos, sino de mucho amor cotidiano.\" ‚Äì Papa Francisco",
            "\"No busques qu√© dar. Date a ti mismo.\" ‚Äì San Agust√≠n",
            "\"La paz no es la ausencia de problemas, sino la presencia de Dios.\" ‚Äì Jacques Philippe",
            "\"√âl quiere tomar tu vida, para ofrecerte la suya.\" ‚Äì Santa Teresa Benedicta de la Cruz",
            "\"Dios tiene un plan que lleva tu nombre.\" ‚Äì An√≥nimo",
            "\"Lo que se necesita para conseguir la felicidad, no es una vida c√≥moda, sino un coraz√≥n enamorado.\" ‚Äì San Josemar√≠a Escriv√°",
            "\"Hay una enorme diferencia entre 'haz lo posible' y 'hazlo posible', la primera depende de ti, la segunda de Dios y √âl todo lo puede.\" ‚Äì An√≥nimo",
            "\"Dios ha escrito para cada uno de nosotros una historia √∫nica e irrepetible, pero nos ha dejado la libertad de escribir la conclusi√≥n.\" ‚Äì San Carlo Acutis",
            "\"Si juzgas a la gente, no tienes tiempo para amarla.\" ‚Äì Madre Teresa de Calcuta",
            "\"No existen l√≠mites para quien tiene fe en Dios.\" ‚Äì An√≥nimo",
            "\"Le haces un cumplido de Dios cuando le pides cosas grandes.\" ‚Äì Santa Teresa de √Åvila",
            "\"La fe es creer lo que no ves; la recompensa es ver lo que crees.\" ‚Äì San Agust√≠n",
            "\"La vida con Dios no es inmunidad frente a las dificultades, sino paz en medio de ellas.\" ‚Äì C. S. Lewis",
            "\"No te inquietes por el ma√±ana; Dios ya est√° all√≠ esper√°ndote.\" ‚Äì Jacques Philippe",
            "\"Reza como si todo dependiera de Dios. Trabaja como si todo dependiera de ti.\" ‚Äì San Agust√≠n",
            "\"La humildad es aceptar con alegr√≠a ser lo que somos ante los ojos de Dios.\" ‚Äì Jacques Philippe",
            "\"A veces Dios no cambia las circunstancias porque est√° usando las circunstancias para cambiarte a ti.\" ‚Äì An√≥nimo",
            "\"La fe es un salto a la oscuridad de las manos de Dios.\" ‚Äì S√∏ren Kierkegaard",
            "\"Difunde el amor dondequiera que vayas.\" ‚Äì Madre Teresa de Calcuta",
            "\"Dios no nos necesita, pero nos quiso.\" ‚Äì Rick Warren",
            "\"La medida de nuestra paz interior depende de nuestra confianza en Dios.\" ‚Äì Jacques Philippe",
            "\"No importa a lo que te enfrentes en la vida, nunca te sueltes de la mano de Dios.\" ‚Äì An√≥nimo",
            "\"Nada te turbe, nada te espante, todo se pasa, Dios no se muda.\" ‚Äì Santa Teresa de √Åvila",
            "\"Sin la paz del coraz√≥n, no podemos hacer nada bueno.\" ‚Äì Jacques Philippe",
            "\"Dios sabe en qu√© tiempo entregarte cada cosa que pides.\" ‚Äì An√≥nimo",
            "\"El amor es la llave que abre todas las puertas.\" ‚Äì San Vicente de Pa√∫l",
            "\"Yo puedo hacer cosas que t√∫ no puedes, t√∫ puedes hacer cosas que yo no puedo; juntos podemos hacer grandes cosas.\" ‚Äì Madre Teresa de Calcuta",
            "\"La oraci√≥n no es para cambiar a Dios, sino para cambiarnos a nosotros mismos.\" ‚Äì C. S. Lewis",
            "\"El camino m√°s corto para llegar a la santidad es aceptar lo que Dios nos env√≠a hoy.\" ‚Äì Jacques Philippe",
            "\"La gloria del Se√±or brilla sobre ti; lev√°ntate y resplandece.\" ‚Äì An√≥nimo",
            "\"Si Dios es tu socio, haz planes en grande.\" ‚Äì D. L. Moody",
            "\"Aceptar nuestra propia debilidad es la puerta abierta a la fuerza de Dios.\" ‚Äì Jacques Philippe",
            "\"Dios conoce lo m√°s profundo de nuestro ser; es √âl quien lo ha modelado con sus propias manos.\" ‚Äì An√≥nimo",
            "\"No todos podemos hacer grandes cosas, pero s√≠ cosas peque√±as con gran amor.\" ‚Äì Madre Teresa de Calcuta",
            "\"La fe es aceptar que Dios nos ama incluso cuando no nos sentimos amables.\" ‚Äì Jacques Philippe",
            "\"Dios no te hubiera dado la capacidad de so√±ar sin darte tambi√©n la posibilidad de convertir tus sue√±os en realidad.\" ‚Äì An√≥nimo",
            "\"Nunca tengas miedo de confiar un futuro desconocido a un Dios conocido.\" ‚Äì Corrie ten Boom",
            "\"Nuestra √∫nica tarea es mantener el coraz√≥n abierto a la gracia.\" ‚Äì Jacques Philippe",
            "\"La verdadera fe no se encuentra en el entendimiento, sino en el coraz√≥n.\" ‚Äì Blaise Pascal",
            "\"Tu lucha silenciosa hace ruido en el cielo.\" ‚Äì Padre P√≠o",
            "\"Quien tiene paz en su interior lo tiene todo, aunque le falte lo material.\" ‚Äì Jacques Philippe",
            "\"Dios, gracias por mantenerme de pie, aun cuando a veces todo parece caer en pedazos.\" ‚Äì An√≥nimo",
            "\"El grado de libertad de una persona se mide por su capacidad de amar.\" ‚Äì Jacques Philippe",
            "\"Si puedes, entiende; si no puedes, cree.\" ‚Äì Santo Tom√°s de Aquino",
            "\"No te das cuenta de que Jes√∫s es todo lo que necesitas hasta que Jes√∫s es todo lo que tienes.\" ‚Äì Tim Keller",
            "\"El amor de Dios es fiel; √âl nunca abandona la obra de sus manos.\" ‚Äì Jacques Philippe",
            "\"La esperanza es el sue√±o del hombre despierto.\" ‚Äì Arist√≥teles",
            "\"Todo lo que est√° bajo el control de Dios nunca est√° fuera de control.\" ‚Äì Charles R. Swindoll",
            "\"La verdadera felicidad no est√° en las circunstancias, sino en la uni√≥n con Dios.\" ‚Äì Jacques Philippe",
            "\"Bienaventurados los corazones flexibles, porque no se romper√°n.\" ‚Äì San Francisco de Sales",
            "\"Camina con los pies en la tierra, pero con la mirada y el coraz√≥n en el cielo.\" ‚Äì San Juan Bosco",
            "\"Confiar en Dios significa creer que √âl puede sacar un bien incluso de nuestros errores.\" ‚Äì Jacques Philippe",
            "\"La tierra no tiene ninguna tristeza que el cielo no pueda curar.\" ‚Äì Santo Tom√°s Moro",
            "\"La oraci√≥n es el tiempo donde dejamos que Dios nos ame.\" ‚Äì Jacques Philippe",
            "\"Porque si estamos locos, es para Dios.\" ‚Äì San Francisco de As√≠s",
            "\"No dejes que termine el d√≠a sin haber crecido un poco m√°s.\" ‚Äì An√≥nimo",
            "\"No busques la paz fuera de ti; la paz es un don que Dios deposita en tu alma.\" ‚Äì Jacques Philippe",
            "\"La vida es tu nav√≠o, no tu morada.\" ‚Äì Santa Teresita del Ni√±o Jes√∫s",
            "\"Un hombre no puede ser m√°s hombre que cuando est√° de rodillas ante Dios.\" ‚Äì San Juan XXIII",
            "\"Dios se propone darnos lo que necesitamos, no lo que creemos necesitar ahora.\" ‚Äì C. S. Lewis",
            "\"No importa lo que est√© sucediendo en tu vida, Dios ya tiene algo perfecto para ti.\" ‚Äì An√≥nimo",
            "\"El futuro es tan brillante como las promesas de Dios.\" ‚Äì William Carey",
            "\"No tengas miedo, conf√≠a en Dios.\" ‚Äì Papa Francisco",
            "\"Quien a Dios tiene, nada le falta: solo Dios basta.\" ‚Äì Santa Teresa de √Åvila",
            "\"Dale a la gente una segunda oportunidad. Basta una persona buena para que haya esperanza.\" ‚Äì Papa Francisco",
            "\"La paz comienza con una sonrisa.\" ‚Äì Madre Teresa de Calcuta",
            "\"Dios ama a cada uno de nosotros como si solo existiera uno.\" ‚Äì San Agust√≠n",
            "\"El coraz√≥n tiene razones que la raz√≥n no entiende.\" ‚Äì Blaise Pascal",
            "\"Nunca dejes que las opiniones de los dem√°s derrumben lo que Dios piensa de ti.\" ‚Äì An√≥nimo",
            "\"Donde hay caridad y amor, all√≠ est√° Dios.\" ‚Äì San Juan de la Cruz",
            "\"A veces Dios usa las circunstancias para cambiarte a ti.\" ‚Äì An√≥nimo",
            "\"Para llegar a lo que no eres, has de ir por donde no eres.\" ‚Äì San Juan de la Cruz",
            "\"La fe mueve monta√±as; el amor mueve fronteras.\" ‚Äì An√≥nimo",
            "\"Al atardecer de la vida, nos examinar√°n en el amor.\" ‚Äì San Juan de la Cruz",
            "\"Dios tiene grandes cosas para tu vida, solamente cree.\" ‚Äì An√≥nimo",
            "\"El que no vive para servir, no sirve para vivir.\" ‚Äì San Juan Pablo II",
            "\"Tu talento es un regalo de Dios para ti; lo que hagas con √©l es tu regalo para Dios.\" ‚Äì Leo Buscaglia",
            "\"La verdadera libertad es el poder de hacer lo que debemos hacer.\" ‚Äì C. S. Lewis",
            "\"Dios es el √∫nico que puede llenar el vac√≠o del alma.\" ‚Äì San Agust√≠n",
            "\"Ama hasta que te duela. Si te duele, es buena se√±al.\" ‚Äì Madre Teresa de Calcuta",
            "\"La cruz es la escalera al cielo.\" ‚Äì Santa Rosa de Lima",
            "\"Dios no elige a los preparados, √âl prepara a los elegidos.\" ‚Äì An√≥nimo",
            "\"Busca a Dios en todas las cosas y lo encontrar√°s en ti mismo.\" ‚Äì San Ignacio de Loyola",
            "\"Todo para la mayor gloria de Dios.\" ‚Äì San Ignacio de Loyola",
            "\"El amor es la fuerza m√°s poderosa del mundo.\" ‚Äì San Francisco de As√≠s",
            "\"Predica el Evangelio en todo momento, y si es necesario, usa palabras.\" ‚Äì San Francisco de As√≠s",
            "\"El sufrimiento compartido es sufrimiento disminuido.\" ‚Äì C. S. Lewis",
            "\"Mirad a las estrellas, pero no olvid√©is que vuestro hogar est√° en Dios.\" ‚Äì C. S. Lewis",
            "\"La paciencia todo lo alcanza.\" ‚Äì Santa Teresa de √Åvila",
            "\"Si tienes a Dios, lo tienes todo.\" ‚Äì San Cipriano",
            "\"La oraci√≥n es el arma de los valientes.\" ‚Äì Padre P√≠o",
            "\"Reza, espera y no te preocupes.\" ‚Äì Padre P√≠o",
            "\"Dios te ama tal como eres, pero te ama demasiado para dejarte as√≠.\" ‚Äì C. S. Lewis",
            "\"No hay lugar tan oscuro donde la luz de Dios no pueda llegar.\" ‚Äì An√≥nimo",
            "\"Si pones a Dios en el centro, todo lo dem√°s encontrar√° su lugar.\" ‚Äì An√≥nimo",
            "\"Dios es el arquitecto de tu destino, conf√≠a en sus planos.\" ‚Äì An√≥nimo",
            "\"Solo Dios sabe cu√°nto te ama, y solo √âl puede saciar tu sed de infinito.\" ‚Äì San Juan Pablo II",
            "\"Tu vida es el mensaje que Dios env√≠a al mundo; aseg√∫rate de que sea hermoso.\" ‚Äì An√≥nimo"
        ];

        function getQuote(date) {
            const baseDate = new Date(2025, 0, 1);
            const diff = date - baseDate;
            const weekIndex = Math.floor(diff / (7 * 24 * 60 * 60 * 1000));
            const index = Math.abs(weekIndex) % 104;
            return weeklyQuotes[index] || weeklyQuotes[0];
        }

        // --- MANEJO DE DATOS ---
        function getDayData(date) {
            const key = `day-${date.toISOString().split('T')[0]}`;
            const data = localStorage.getItem(key);
            return data ? JSON.parse(data) : { 
                tasks: "", events: "", luces: "", 
                examen: ["", "", "", "", ""], 
                wellness: { sleep: 0, water: 0, mobility: 0, nature: 0 },
                prayer: { checks: [], message: "" },
                nazareth: { hogar: "", trabajo: "", ofreciendoHogar: "", ofreciendoTrabajo: "" }
            };
        }

        function saveDayData(date, data) {
            const key = `day-${date.toISOString().split('T')[0]}`;
            localStorage.setItem(key, JSON.stringify(data));
        }

        // --- VISTAS ---
        function showTab(tab) {
            const container = document.getElementById('view-container');
            document.querySelectorAll('.sidebar-item').forEach(el => el.classList.remove('active-tab'));
            document.getElementById('nav-' + tab).classList.add('active-tab');
            document.getElementById('main-scroll').scrollTop = 0;

            if (tab === 'mes') renderMonthView(container);
            else if (tab === 'dia') renderDayView(container);
            else if (tab === 'luces') renderLucesGallery(container);
            else if (tab === 'oracion') renderSpiritualDiary(container);
            else if (tab === 'bienestar') renderWellnessGlobal(container);
            else if (tab === 'nazareth') renderNazarethView(container);
            else if (tab === 'pendientes') renderPendientesView(container);
        }

        // --- VISTA MENSUAL ---
        function renderMonthView(container) {
            const monthName = months[viewDate.getMonth()];
            container.innerHTML = `
                <div class="flex justify-between items-center mb-8">
                    <div class="flex items-baseline gap-4">
                        <h2 class="text-4xl text-stone-800">${monthName} <span class="text-stone-300">${viewDate.getFullYear()}</span></h2>
                        <span class="hidden lg:block text-[10px] text-stone-400 italic font-serif max-w-sm border-l border-stone-200 pl-4 leading-relaxed">
                            ${getQuote(viewDate)}
                        </span>
                    </div>
                    <div class="flex gap-4 text-2xl text-stone-300">
                        <button onclick="changeMonth(-1)" class="hover:text-stone-800">‚Äπ</button>
                        <button onclick="changeMonth(1)" class="hover:text-stone-800">‚Ä∫</button>
                    </div>
                </div>
                <div class="grid grid-cols-7 mb-2 text-[10px] font-bold text-stone-300 tracking-widest text-center">
                    <div>DOM</div><div>LUN</div><div>MAR</div><div>MI√â</div><div>JUE</div><div>VIE</div><div>S√ÅB</div>
                </div>
                <div class="calendar-grid bg-white rounded-2xl shadow-sm overflow-hidden border border-stone-100">
                    ${generateCalendarHtml()}
                </div>
            `;
        }

        function generateCalendarHtml() {
            const firstDay = new Date(viewDate.getFullYear(), viewDate.getMonth(), 1).getDay();
            const daysInMonth = new Date(viewDate.getFullYear(), viewDate.getMonth() + 1, 0).getDate();
            const today = new Date();
            let html = '';
            for (let i = 0; i < firstDay; i++) html += '<div class="day-card border-none"></div>';
            for (let i = 1; i <= daysInMonth; i++) {
                const cur = new Date(viewDate.getFullYear(), viewDate.getMonth(), i);
                const isToday = cur.toDateString() === today.toDateString();
                const dData = getDayData(cur);
                const hasContent = dData.tasks || dData.luces || dData.prayer.message;
                html += `<div onclick="selectDate(${viewDate.getFullYear()}, ${viewDate.getMonth()}, ${i})" class="day-card ${hasContent ? 'has-content' : ''}"><span class="${isToday ? 'today' : 'text-stone-600'}">${i}</span></div>`;
            }
            return html;
        }

        // --- VISTA DIARIA (Fusi√≥n de V1 y V2) ---
        function renderDayView(container) {
            const data = getDayData(selectedDate);
            const dateStr = `${selectedDate.getDate()} de ${months[selectedDate.getMonth()]}`;
            
            container.innerHTML = `
                <div class="mb-6">
                    <div class="flex items-center gap-4 mb-1">
                        <button onclick="showTab('mes')" class="text-stone-200 hover:text-stone-800 text-xl">‚Üê</button>
                        <h2 class="text-3xl text-stone-800 italic">${dateStr}</h2>
                    </div>
                    <p class="text-[10px] text-stone-400 italic font-serif ml-10">${getQuote(selectedDate)}</p>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <div class="space-y-6">
                        <div class="bg-white p-6 rounded-3xl shadow-sm border border-stone-100">
                            <h3 class="text-[10px] font-bold text-stone-400 tracking-widest uppercase mb-4">Pendientes</h3>
                            <textarea oninput="updateField('tasks', this.value)" class="h-32 text-stone-600" placeholder="- Escribe tus tareas...">${data.tasks}</textarea>
                        </div>
                        
                        <div class="bg-white p-6 rounded-3xl shadow-sm border border-stone-100">
                            <h3 class="text-[10px] font-bold text-stone-400 tracking-widest uppercase mb-6">Bienestar</h3>
                            <div class="space-y-4">
                                ${renderWellnessRow('sleep', 'üåô', 'SUE√ëO (1HR)', 8, data.wellness.sleep, 'text-indigo-400')}
                                ${renderWellnessRow('water', 'üíß', 'HIDRATACI√ìN (VASO)', 8, data.wellness.water, 'text-blue-400')}
                                ${renderWellnessRow('mobility', 'ü¶∂', 'CUERPO (20m)', 3, data.wellness.mobility, 'text-orange-400')}
                                ${renderWellnessRow('nature', 'üåø', 'AIRE (10m)', 3, data.wellness.nature, 'text-green-500')}
                            </div>
                        </div>

                        <div class="bg-stone-800 p-6 rounded-3xl text-white">
                            <h3 class="text-[10px] font-bold text-stone-400 uppercase mb-4">Vida de Oraci√≥n</h3>
                            <div class="grid grid-cols-1 gap-2 text-xs mb-4">
                                ${renderPrayerChecks(data.prayer.checks)}
                            </div>
                            <p class="text-[10px] font-bold text-stone-400 uppercase mb-2">¬øQu√© me dijo Dios hoy?</p>
                            <textarea oninput="updatePrayerMsg(this.value)" class="bg-stone-700/50 p-3 rounded-xl h-20 text-xs text-stone-200" placeholder="Gu√°rdalo en el coraz√≥n...">${data.prayer.message}</textarea>
                        </div>
                    </div>

                    <div class="space-y-6">
                        <div class="bg-[#fffbf0] p-6 rounded-3xl border border-stone-100">
                            <h3 class="text-[10px] font-bold text-yellow-600 tracking-widest uppercase mb-2">Luz del D√≠a ‚ú®</h3>
                            <textarea oninput="updateField('luces', this.value)" class="h-16 italic text-stone-700 text-sm" placeholder="Un peque√±o milagro...">${data.luces}</textarea>
                        </div>

                        <div class="bg-white p-6 rounded-3xl shadow-sm border border-stone-100">
                            <h3 class="text-[10px] font-bold text-stone-400 uppercase mb-4">Examen de Conciencia</h3>
                            <div class="space-y-4">
                                ${renderExamenInputs(data.examen)}
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        // --- RENDERIZADORES DE COMPONENTES ---
        function renderWellnessRow(type, icon, label, max, current, color) {
            let dots = '';
            for(let i=1; i<=max; i++) {
                dots += `<div onclick="updateWellness('${type}', ${i})" class="wellness-icon ${i > current ? 'inactive' : ''} cursor-pointer text-xl ${i <= current ? color : 'text-stone-200'}">${icon}</div>`;
            }
            return `<div><p class="text-[8px] font-bold text-stone-400 mb-1">${label}</p><div class="flex gap-1">${dots}</div></div>`;
        }

        function renderExamenInputs(values) {
            const qs = [
                "¬øQu√© es lo que m√°s agradezco de hoy?",
                "¬øEn qu√© situaciones vi a Dios el d√≠a de hoy?",
                "¬øQu√© emoci√≥n predomin√≥ hoy? (H√°blalo con Dios)",
                "¬øDesde qu√© lugar interior me gustar√≠a vivir ma√±ana?",
                "¬øEn qu√© momentos me qued√© corta en amor?"
            ];
            return qs.map((q, i) => `
                <div>
                    <label class="block text-[9px] font-bold text-stone-400 mb-1 leading-tight">${q}</label>
                    <input type="text" value="${values[i]}" oninput="updateExamen(${i}, this.value)" class="border-b border-stone-100 py-1 text-xs text-stone-600" placeholder="Escribe aqu√≠...">
                </div>
            `).join('');
        }

        function renderPrayerChecks(checked) {
            const opts = ["Meditaci√≥n de la palabra", "Contemplaci√≥n en el sant√≠simo", "Contemplaci√≥n en la naturaleza", "Lectura espiritual", "Oraci√≥n de repetici√≥n"];
            return opts.map(opt => `
                <label class="flex items-center gap-2 cursor-pointer">
                    <input type="checkbox" class="custom-checkbox" ${checked.includes(opt) ? 'checked' : ''} onchange="togglePrayerCheck('${opt}')">
                    <span>${opt}</span>
                </label>
            `).join('');
        }

        // --- LOGICA DE BIENESTAR (SCORECARD) ---
        function renderWellnessGlobal(container) {
            const allKeys = Object.keys(localStorage).filter(k => k.startsWith('day-'));
            let totals = { sleep: 0, water: 0, mobility: 0, nature: 0 };
            let count = allKeys.length || 1;
            const max = { sleep: 8, water: 8, mobility: 3, nature: 3 };

            allKeys.forEach(k => {
                const d = JSON.parse(localStorage.getItem(k));
                if(d.wellness) {
                    totals.sleep += d.wellness.sleep;
                    totals.water += d.wellness.water;
                    totals.mobility += d.wellness.mobility;
                    totals.nature += d.wellness.nature;
                }
            });

            const scores = {
                sleep: Math.round((totals.sleep / (count * max.sleep)) * 100) || 0,
                water: Math.round((totals.water / (count * max.water)) * 100) || 0,
                mobility: Math.round((totals.mobility / (count * max.mobility)) * 100) || 0,
                nature: Math.round((totals.nature / (count * max.nature)) * 100) || 0
            };

            container.innerHTML = `
                <h2 class="text-4xl text-stone-800 mb-6 italic">Mi Bienestar üåø</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    ${renderScoreCard('Sue√±o', scores.sleep, 'üåô', "Prioriza tu descanso esta semana.")}
                    ${renderScoreCard('Hidrataci√≥n', scores.water, 'üíß', "Lleva tu termo de agua contigo.")}
                    ${renderScoreCard('Movilidad', scores.mobility, 'ü¶∂', "Camina 10 min cada 4 horas.")}
                    ${renderScoreCard('Naturaleza', scores.nature, 'üåø', "Admira conscientemente la creaci√≥n.")}
                </div>
            `;
        }

        function renderScoreCard(title, score, icon, feedback) {
            return `
                <div class="bg-white p-6 rounded-3xl border border-stone-100 shadow-sm">
                    <div class="flex justify-between items-center mb-2">
                        <span class="text-xs font-bold text-stone-400 uppercase">${icon} ${title}</span>
                        <span class="text-xl font-bold">${score}%</span>
                    </div>
                    <div class="w-full bg-stone-100 h-2 rounded-full overflow-hidden mb-4">
                        <div class="bg-stone-800 h-full" style="width: ${score}%"></div>
                    </div>
                    <p class="text-[10px] italic text-stone-500">${score < 60 ? feedback : '¬°Vas muy bien! Mant√©n el ritmo.'}</p>
                </div>
            `;
        }

        // --- GALER√çAS E HISTORIAL ---
        function renderLucesGallery(container) {
            const allKeys = Object.keys(localStorage).filter(k => k.startsWith('day-')).sort().reverse();
            container.innerHTML = `<h2 class="text-4xl text-stone-800 mb-8 italic">Mis Luces ‚ú®</h2><div class="columns-1 md:columns-2 gap-4" id="luces-grid"></div>`;
            const grid = document.getElementById('luces-grid');
            allKeys.forEach(k => {
                const d = JSON.parse(localStorage.getItem(k));
                if(d.luces) grid.innerHTML += `<div class="bg-[#fffbf0] p-6 rounded-3xl border border-yellow-100 italic mb-4 text-sm text-stone-700">"${d.luces}" <span class="block text-[8px] mt-2 font-bold opacity-30 uppercase">${k.replace('day-', '')}</span></div>`;
            });
        }

        function renderSpiritualDiary(container) {
            const allKeys = Object.keys(localStorage).filter(k => k.startsWith('day-')).sort().reverse();
            container.innerHTML = `<h2 class="text-4xl text-stone-800 mb-8 italic">Diario Espiritual üôè</h2><div class="space-y-4"></div>`;
            const list = container.querySelector('div');
            allKeys.forEach(k => {
                const d = JSON.parse(localStorage.getItem(k));
                if(d.prayer.message) list.innerHTML += `<div class="bg-white p-6 rounded-3xl border border-stone-100 shadow-sm"><p class="text-[9px] font-bold text-stone-300 uppercase mb-2">${k.replace('day-', '')}</p><p class="text-sm text-stone-700 italic">"Lo que Dios me dijo: ${d.prayer.message}"</p></div>`;
            });
        }

        // --- VISTA NAZARETH (De V1) ---
        function renderNazarethView(container) {
            const data = getDayData(selectedDate).nazareth;
            container.innerHTML = `
                <div class="max-w-2xl mx-auto space-y-8">
                    <div class="text-center space-y-4">
                        <h2 class="text-4xl text-stone-800 italic">Mi Nazareth</h2>
                        <p class="text-[11px] text-stone-500 uppercase tracking-widest px-8 leading-relaxed italic">‚ÄúLavar un plato no porque ames lavarlo, sino porque amas a la persona que lo usar√° despu√©s.‚Äù</p>
                    </div>
                    <div class="bg-white p-8 rounded-[2rem] shadow-sm border border-stone-100 space-y-6">
                        <div>
                            <h3 class="text-[10px] font-bold text-stone-400 uppercase mb-2">Hogar</h3>
                            <textarea oninput="updateNazareth('hogar', this.value)" class="bg-stone-50/50 p-4 rounded-2xl h-24 text-sm">${data.hogar}</textarea>
                            <input oninput="updateNazareth('ofreciendoHogar', this.value)" type="text" class="mt-2 italic text-xs text-stone-400 px-2" placeholder="¬øA qui√©n estoy amando?" value="${data.ofreciendoHogar}">
                        </div>
                        <div>
                            <h3 class="text-[10px] font-bold text-stone-400 uppercase mb-2">Trabajo</h3>
                            <textarea oninput="updateNazareth('trabajo', this.value)" class="bg-stone-50/50 p-4 rounded-2xl h-24 text-sm">${data.trabajo}</textarea>
                            <input oninput="updateNazareth('ofreciendoTrabajo', this.value)" type="text" class="mt-2 italic text-xs text-stone-400 px-2" placeholder="¬øPor qui√©n lo ofrezco?" value="${data.ofreciendoTrabajo}">
                        </div>
                    </div>
                </div>`;
        }

        // --- FUNCIONES DE ACTUALIZACI√ìN ---
        window.updateField = (f, v) => { const d = getDayData(selectedDate); d[f] = v; saveDayData(selectedDate, d); };
        window.updateExamen = (i, v) => { const d = getDayData(selectedDate); d.examen[i] = v; saveDayData(selectedDate, d); };
        window.updateWellness = (type, val) => { const d = getDayData(selectedDate); d.wellness[type] = (d.wellness[type] === val ? 0 : val); saveDayData(selectedDate, d); renderDayView(document.getElementById('view-container')); };
        window.togglePrayerCheck = (opt) => { const d = getDayData(selectedDate); const idx = d.prayer.checks.indexOf(opt); if(idx > -1) d.prayer.checks.splice(idx, 1); else d.prayer.checks.push(opt); saveDayData(selectedDate, d); };
        window.updatePrayerMsg = (v) => { const d = getDayData(selectedDate); d.prayer.message = v; saveDayData(selectedDate, d); };
        window.updateNazareth = (f, v) => { const d = getDayData(selectedDate); d.nazareth[f] = v; saveDayData(selectedDate, d); };
        window.changeMonth = (o) => { viewDate.setMonth(viewDate.getMonth() + o); showTab('mes'); };
        window.selectDate = (y, m, d) => { selectedDate = new Date(y, m, d); showTab('dia'); };

        function renderPendientesView(container) {
            container.innerHTML = `<h2 class="text-4xl text-stone-800 mb-8 italic">Todos los Pendientes</h2><div class="space-y-4" id="todo-list"></div>`;
            const list = document.getElementById('todo-list');
            Object.keys(localStorage).filter(k => k.startsWith('day-')).forEach(k => {
                const d = JSON.parse(localStorage.getItem(k));
                if (d.tasks) list.innerHTML += `<div class="bg-white p-4 rounded-2xl border border-stone-100"><p class="text-[9px] font-bold text-stone-300 mb-2 uppercase">${k.replace('day-', '')}</p><p class="text-xs text-stone-600 whitespace-pre-wrap">${d.tasks}</p></div>`;
            });
        }

        showTab('mes');
    </script>
</body>
</html>
